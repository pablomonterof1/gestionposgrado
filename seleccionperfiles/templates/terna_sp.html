{% extends 'layouts/base.html' %}

{% block content %}

<main style="padding: 2%;">
    <section class="card" style="padding: 2%;">


        <p class="lead" style="font-size: 2em;">Terna del modulo <b>{{modulos_list.0.modulo }}</b>: </p><br>
        <p class="lead" style="font-size: 1.5em;">Responsable: </p>
        <div style="text-align: right;">
            <a class="btn  btn-primary" href="#">Seleccionar Responsable</a>
            <a class="btn  btn-primary" href="{% url 'crearternamodulopmmsp' programa_id modulo_id %}"> Crear Terna</a>
        </div>

        <!-- Lista de contrados x docente -->
        {{ terna.programa_posgrado }}
        <div class="table-responsive mt-4">
            <table id="tablaTernapmmsp" class="table table-striped table-bordered">
                <thead>
                    <tr>
                        <th scope="col">Docente</th>
                        <th scope="col">Cédula</th>
                        <th scope="col">Perfil académico</th>
                        <th scope="col">Estado</th>
                        <th scope="col">Fecha de registro</th>

                    </tr>
                </thead>
                <tbody>
                    {% if terna.docente1_idoneo %}
                    <tr>
                        <td>{{ terna.docente1_idoneo.get_full_name }}</td>
                        <td>{{ terna.docente1_idoneo.perfilusuario.ci }}</td>
                        <td>
                            {{ terna.docente1_idoneo.perfilusuario.perfilacademicousuario.titulo_grado }}<br>
                            {{ terna.docente1_idoneo.perfilusuario.perfilacademicousuario.titulo_postgrado_maestria
                            }}<br>
                            {{ terna.docente1_idoneo.perfilusuario.perfilacademicousuario.titulo_postgrado_doctorado }}
                        </td>
                        <td>Idóneo</td> <!-- <<< Estado aquí -->
                        <td>{{ terna.fecha_creacion|date:"d/m/Y H:i:s" }}</td>
                    </tr>
                    {% endif %}

                    {% if terna.docente2 %}
                    <tr>
                        <td>{{ terna.docente2.get_full_name }}</td>
                        <td>{{ terna.docente2.perfilusuario.ci }}</td>
                        <td>
                            {{ terna.docente2.perfilusuario.perfilacademicousuario.titulo_grado }}<br>
                            {{ terna.docente2.perfilusuario.perfilacademicousuario.titulo_postgrado_maestria }}<br>
                            {{ terna.docente2.perfilusuario.perfilacademicousuario.titulo_postgrado_doctorado }}
                        </td>
                        <td>Elegible 1</td> <!-- <<< Estado aquí -->
                        <td>{{ terna.fecha_creacion|date:"d/m/Y H:i:s" }}</td>
                    </tr>
                    {% endif %}

                    {% if terna.docente3 %}
                    <tr>
                        <td>{{ terna.docente3.get_full_name }}</td>
                        <td>{{ terna.docente3.perfilusuario.ci }}</td>
                        <td>
                            {{ terna.docente3.perfilusuario.perfilacademicousuario.titulo_grado }}<br>
                            {{ terna.docente3.perfilusuario.perfilacademicousuario.titulo_postgrado_maestria }}<br>
                            {{ terna.docente3.perfilusuario.perfilacademicousuario.titulo_postgrado_doctorado }}
                        </td>
                        <td>Elegible 2</td> <!-- <<< Estado aquí -->
                        <td>{{ terna.fecha_creacion|date:"d/m/Y H:i:s" }}</td>
                    </tr>
                    {% endif %}
                </tbody>


            </table>
        </div>

    </section>
</main>


<script>

    $(document).ready(function () {
        $('#tablaTernapmmsp').DataTable({
            "language": {
                "lengthMenu": "Mostrar _MENU_ registros por página",
                "zeroRecords": "No se encontraron resultados",
                "info": "Mostrando página _PAGE_ de _PAGES_",
                "infoEmpty": "No hay registros disponibles",
                "infoFiltered": "(filtrado de _MAX_ registros totales)",
                "search": "Buscar:",
                "paginate": {
                    "first": "Primera",
                    "last": "Última",
                    "next": "Siguiente",
                    "previous": "Anterior"
                }
            },
            "bLengthChange": false,
            "bFilter": false,
            "bPaginate": false
        });
    });


    function confirmarBorrado(id) {
        Swal.fire({
            title: '¿Estás seguro de borrar el contrato?',
            text: "¡Esta acción no se puede deshacer!",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#d33',
            cancelButtonColor: '#3085d6',
            confirmButtonText: 'Sí, borrar',
            cancelButtonText: 'Cancelar'
        }).then((result) => {
            if (result.isConfirmed) {
                document.getElementById('form-borrar-' + id).submit();
            }
        })
    }


</script>



{% endblock %}